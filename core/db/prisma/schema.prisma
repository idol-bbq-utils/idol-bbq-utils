generator client {
  provider = "prisma-client-js"
  output   = "client"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model article {
  id                    Int               @id @unique(map: "sqlite_autoindex_article_1") @default(autoincrement())
  platform              Int
  a_id                  String
  u_id                  String
  username              String
  created_at            Int
  content               String?
  translation           String?
  translated_by         String?
  url                   String
  type                  String
  ref                   Int?
  has_media             Boolean
  media                 Json?
  extra                 Json?
  u_avatar              String?
  article               article?  @relation("articleToarticle", fields: [ref], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_article         article[] @relation("articleToarticle")

  @@unique([a_id, platform], map: "sqlite_autoindex_article_2")
  @@index([platform], map: "platform_index")
  @@index([platform, created_at(sort: Desc)], map: "platform_by_timestamp")
  @@map("article")
}

model follow {
  id         Int    @id @unique(map: "sqlite_autoindex_follow_1") @default(autoincrement())
  username   String
  u_id       String
  platform   Int
  followers  Int
  created_at Int

  @@index([u_id], map: "user_id_index")
  @@map("follow")
}

model send_by {
  ref_id    Int
  sender_id String
  task_type String

  @@id([ref_id, sender_id, task_type])
  @@index([sender_id], map: "sender_id_index")
  @@map("send_by")
}
